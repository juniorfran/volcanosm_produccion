{% extends "base.html" %}

{% load static %}

{% block content %}

{% include "direccionamiento.html" %}


<!-- Contact Start -->
<div class="container-fluid py-5">
    <div class="container py-5">
        <div class="text-center mb-3 pb-3">
            <h6 class="text-primary text-uppercase" style="letter-spacing: 5px;">Contactanos</h6>
            <h2>Si tienes alguna duda puedes contactarnos</h2>
        </div>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="contact-form bg-white" style="padding: 30px;">
                    <div id="success"></div>
                    <form method="post">
                        {% csrf_token %}
                        <div class="form-row">
                            <div class="control-group col-sm-6">
                                <input type="text" class="form-control p-4" id="name" placeholder="Tu Nombre Completo"
                                    required="required" name="name" />
                                <p class="help-block text-danger"></p>
                            </div>
                            <div class="control-group col-sm-6">
                                <input type="email" class="form-control p-4" id="email" placeholder="Tu Email"
                                    required="required" name="email" />
                                <p class="help-block text-danger"></p>
                            </div>
                        </div>
                        <div class="control-group">
                            <input type="text" class="form-control p-4" id="subject" placeholder="Asunto"
                                required="required" name="subject" />
                            <p class="help-block text-danger"></p>
                        </div>
                        <div class="control-group">
                            <textarea class="form-control py-3 px-4" rows="5" id="message" placeholder="Como podemos ayudarte"
                                required="required" name="message"></textarea>
                            <p class="help-block text-danger"></p>
                        </div>
                        <input type="hidden" name="recaptcha_token" id="recaptcha_token">
                        <input type="hidden" name="recaptcha_action" value="contact">

                        <!-- Botón normal -->
                        <div class="text-center">
                            <button class="btn btn-primary py-3 px-4" type="submit">
                                Enviar Mensaje
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Contact End -->




 <script src="https://www.google.com/recaptcha/api.js?render={{ recaptcha_site_key }}"></script>

    <script>
      /* ② Genera un token cada vez que se vaya a enviar el formulario.
            Si tu página tarda en enviarse (>2 min), regenera el token en submit. */
      function genRecaptchaToken() {
          grecaptcha.ready(function () {
              grecaptcha.execute('{{ recaptcha_site_key }}', {action: 'contact'}).then(function (token) {
                  document.getElementById('recaptcha_token').value = token;
              });
          });
      }

      // Genera al cargar y cada 110 s para prevenir expiración
      genRecaptchaToken();
      setInterval(genRecaptchaToken, 110 * 1000);
    </script>
{% endblock content %}

{% block extra_js %}
 <script src="https://www.google.com/recaptcha/api.js?render={{ recaptcha_site_key }}"></script>

    <script>
      /* ② Genera un token cada vez que se vaya a enviar el formulario.
            Si tu página tarda en enviarse (>2 min), regenera el token en submit. */
      function genRecaptchaToken() {
          grecaptcha.ready(function () {
              grecaptcha.execute('{{ recaptcha_site_key }}', {action: 'contact'}).then(function (token) {
                  document.getElementById('recaptcha_token').value = token;
              });
          });
      }

      // Genera al cargar y cada 110 s para prevenir expiración
      genRecaptchaToken();
      setInterval(genRecaptchaToken, 110 * 1000);
    </script>
{% endblock extra_js %}